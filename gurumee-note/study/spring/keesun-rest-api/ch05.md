REST API 보안 적용
===================

> 백기선님의 인프런 강좌 "스프링 기반 REST API 개발"을 보고 정리한 문서들입니다. 강의는 개발자의 피와 땀의 결실이라고 생각합니다. 꼭 인프런 강의를 듣고, 참고 사항으로 보셨으면 좋겠습니다.

Contents
--------------

1. Account 도메인 추가
2. 스프링 시큐리티 적용
3. 예외 테스트
4. 스프링 시큐리티 기본 설정
5. 스프링 시큐리티 폼 인증 설정
6. 스프링 시큐리티 OAuth2 인증 서버 설정
7. 리소스 서버 설정
8. 문자열을 외부 설정으로 빼내기
9. 이벤트 API 점검
10. 현재 사용자 조회
11. 출력 값 제한하기
12. 깨진 테스트 살펴보기

* [소스코드](https://github.com/gurumee92/keesun-rest-api) 브랜치: ENH-05


## Account 도메인 추가

이번 절에서는 스프링 시큐리티 적용을 위하여 `Account`, `AccountRoles`를 만들고 `Event`에 `Account`를 다대일 매핑하겠습니다. 별로 설명할 내용은 없으니 코드를 살펴보시죠.

src/main/java/project/accounts/Account.java
```java
package com.gurumee.keesunrestapi.accounts;

import lombok.*;

import javax.persistence.*;
import java.util.Set;

@NoArgsConstructor @AllArgsConstructor
@EqualsAndHashCode(of="id")
@Getter @Setter
@Builder
@Entity
public class Account {
    @Id
    @GeneratedValue
    private Integer id;

    private String email;

    private String password;

    //컬렉션이니 컬렉션 매핑
    @ElementCollection(fetch = FetchType.EAGER)
    @Enumerated(EnumType.STRING)
    private Set<AccountRole> roles;
}
```

src/main/java/project/accounts/AccountRole.java
```java
package com.gurumee.keesunrestapi.accounts;

public enum AccountRole {
    ADMIN, USER
}
```

src/main/java/project/events/Event.java
```java
package com.gurumee.keesunrestapi.events;

import com.gurumee.keesunrestapi.accounts.Account;

/* import */

@Builder @AllArgsConstructor @NoArgsConstructor
@Getter @Setter @ToString @EqualsAndHashCode(of="id")
@Entity
public class Event {
    /* 이전과 동일 */

    @ManyToOne
    private Account manager;

    /* 이전과 동일 */
}
```


## 스프링 시큐리티 적용


## 예외 테스트


## 스프링 시큐리티 기본 설정


## 스프링 시큐리티 폼 인증 설정


## 스프링 시큐리티 OAuth2 인증 서버 설정


## 리소스 서버 설정


## 문자열을 외부 설정으로 빼내기


## 이벤트 API 점검


## 현재 사용자 조회


## 출력 값 제한하기


## 깨진 테스트 살펴보기

